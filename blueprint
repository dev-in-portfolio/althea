CardPress — Vue.js + Neon blueprint (card composer + publishable pages)

What it is

CardPress is a Vue front-end for composing ordered “cards” (text/image/embed/quote) into a page, saving drafts, and publishing to a public URL. This is a real product pattern: editor → preview → publish → share.

(Not micro-logging. It’s a content builder.)


---

Shared backbone (required in every Neon-backed Vue app)

Rule: Vue must never connect to Neon directly.
Flow: Vue → API server → Neon

Identity (v1, no auth):

Vue creates device_key UUID in localStorage

Sends X-Device-Key on every request

API maps to user_id


Server invariants

DATABASE_URL env-only

Parameterized SQL only

CORS configured

Payload size limits (cards can get big)



---

Data model (Neon Postgres)

sql/001_cardpress.sql

create extension if not exists pgcrypto;

create table if not exists users (
  id uuid primary key default gen_random_uuid(),
  device_key text not null unique,
  created_at timestamptz not null default now()
);

create table if not exists pages (
  id uuid primary key default gen_random_uuid(),
  user_id uuid not null references users(id) on delete cascade,
  title text not null,
  slug text not null,
  status text not null default 'draft' check (status in ('draft','published')),
  published_slug text null unique,
  created_at timestamptz not null default now(),
  updated_at timestamptz not null default now(),
  unique(user_id, slug)
);

create table if not exists page_cards (
  id uuid primary key default gen_random_uuid(),
  page_id uuid not null references pages(id) on delete cascade,
  type text not null check (type in ('text','image','embed','quote')),
  ord int not null,
  title text not null default '',
  body text not null default '',
  image_url text not null default '',
  embed_url text not null default '',
  created_at timestamptz not null default now(),
  unique(page_id, ord)
);

create index if not exists idx_pages_user_status on pages(user_id, status, updated_at desc);
create index if not exists idx_cards_page_ord on page_cards(page_id, ord);


---

Publish rule (MVP)

Draft → Published sets published_slug once (random-ish slug generated server-side)

Published page is viewable at /p/:published_slug

In MVP, published page reflects latest saved state (no snapshoting)



---

API surface

Base: /api/cardpress

Pages

GET /pages

POST /pages { title, slug }

GET /pages/:id → includes cards

PATCH /pages/:id { title?, slug?, status? }

DELETE /pages/:id


Cards

POST /pages/:id/cards { type, ord, title?, body?, imageUrl?, embedUrl? }

PATCH /cards/:cardId { title?, body?, imageUrl?, embedUrl?, ord? }

DELETE /cards/:cardId


Public

GET /public/:published_slug → returns page + ordered cards


Caps

Max cards per page: 500

Max body per card: 20k chars

Max pages per user: 10k



---

Vue app structure (Vite)

src/
  main.ts
  router.ts
  core/
    deviceKey.ts
    api.ts
  pages/
    Dashboard.vue
    Editor.vue
    PublicPage.vue
  components/
    CardList.vue
    CardEditorPanel.vue
    CardPreview.vue
    ReorderControls.vue
    PublishBar.vue


---

Core UX (MVP)

Dashboard

list drafts/published

create new page


Editor

left: card list (order + type)

right: editor panel for selected card

preview pane (rendered)

reorder via up/down buttons (drag later)


Publish

button: publish/unpublish

after publish: show public URL


Public Page

clean read-only render

no editor scripts loaded beyond what Vue needs



---

Smoke tests

1. Create page + slug


2. Add 5 cards (mix of types)


3. Reorder cards; reload; order persists


4. Publish; open public URL in private window; works


5. Edit card; refresh public page; reflects changes




---

Done definition

Done = Vue editor can compose ordered cards into pages, persist to Neon via API, and publish a public read-only view.

