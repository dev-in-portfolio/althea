(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{2688:function(s,e,n){Promise.resolve().then(n.bind(n,1976))},1976:function(s,e,n){"use strict";n.r(e),n.d(e,{default:function(){return i},dynamic:function(){return l}});var t=n(8247),a=n(888),c=n(5755),o=n(9644);let l="force-dynamic";function i(){let s=(0,o.N)(),e=(0,c.useParams)(),n=null==e?void 0:e.weekStart,[l,i]=(0,a.useState)(null),[r,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(!1),m=(0,a.useMemo)(()=>l?Math.round(l.total_seconds/3600):0,[l]),_=(0,a.useMemo)(()=>l?Math.round(l.total_seconds/60):0,[l]);async function g(){let{data:e,error:t}=await s.from("weekly_mints").select("id,week_start,total_seconds,session_count,flow_count,drag_count,top_tags,created_at").eq("week_start",n).single();if(t){d(t.message);return}i(e)}return((0,a.useEffect)(()=>{s.auth.getSession().then(s=>{let{data:e}=s;e.session||(window.location.href="/login")})},[]),(0,a.useEffect)(()=>{n&&g()},[n]),l)?(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("h2",{children:["Mint: Week of ",new Date(l.week_start).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"toolbar",style:{marginTop:12},children:[(0,t.jsxs)("span",{className:"badge",children:["Total ",u?"".concat(_,"m"):"".concat(m,"h")]}),(0,t.jsxs)("span",{className:"badge",children:["Sessions ",l.session_count]}),(0,t.jsxs)("span",{className:"badge",children:["Flow ",l.flow_count]}),(0,t.jsxs)("span",{className:"badge",children:["Drag ",l.drag_count]})]}),(0,t.jsx)("div",{className:"toolbar",style:{marginTop:8},children:(0,t.jsx)("button",{className:"btn secondary",onClick:()=>h(s=>!s),children:u?"Show hours":"Show minutes"})}),r&&(0,t.jsx)("p",{className:"muted",style:{marginTop:12},children:r})]}),(0,t.jsxs)("div",{className:"card alt",children:[(0,t.jsx)("h3",{children:"Top tags"}),0===l.top_tags.length?(0,t.jsx)("p",{className:"muted",children:"No tagged sessions this week."}):(0,t.jsx)("div",{className:"grid",style:{marginTop:12},children:l.top_tags.map(s=>(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("strong",{children:s.tag}),(0,t.jsx)("p",{className:"muted",children:u?"".concat(Math.round(s.seconds/60)," min"):"".concat(Math.round(s.seconds/3600)," h")})]},s.tag))})]})]}):(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("p",{className:"muted",children:"Loading mint..."}),r&&(0,t.jsx)("p",{className:"muted",children:r})]})}},9644:function(s,e,n){"use strict";n.d(e,{N:function(){return o}});var t=n(4286),a=n(461);let c=null;function o(){if(c)return c;let s=a.env.NEXT_PUBLIC_SUPABASE_URL||"http://localhost:54321",e=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"anon-key";return c=(0,t.eI)(s,e,{auth:{persistSession:!0,autoRefreshToken:!0}})}}},function(s){s.O(0,[775,501,539,744],function(){return s(s.s=2688)}),_N_E=s.O()}]);