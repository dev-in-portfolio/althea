(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{9749:function(e,t,n){Promise.resolve().then(n.bind(n,3129))},3129:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(7437),l=n(2265),a=n(6463),r=n(3323);function i(){let e=(0,r.Z)(),t=(0,a.useRouter)(),[n,i]=(0,l.useState)(""),[u,o]=(0,l.useState)(120),[c,d]=(0,l.useState)([{label:"",duration:30,must:!1}]),[m,h]=(0,l.useState)(null),b=(e,t,n)=>{d(s=>s.map((s,l)=>l===e?{...s,[t]:n}:s))},p=e=>{d(t=>t.filter((t,n)=>n!==e))},j=async()=>{let s=c.map(e=>({label:String(e.label||"").trim(),duration_min:Number(e.duration||0),must:!!e.must})).filter(e=>e.label&&e.duration_min>0),l=await fetch("/api/problems",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userKey:e,title:n,availableMinutes:u,tasks:s})}),a=null;try{a=await l.json()}catch(e){a=null}if(!l.ok){h((null==a?void 0:a.error)||"Could not create problem.");return}t.push("/problems/".concat(a.id))};return(0,s.jsxs)("div",{className:"stack",children:[(0,s.jsxs)("div",{className:"hero",children:[(0,s.jsx)("h1",{children:"New Problem"}),(0,s.jsx)("h2",{children:"Pack tasks into a fixed time window."})]}),m?(0,s.jsx)("div",{className:"banner",children:m}):null,(0,s.jsxs)("section",{className:"panel stack",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("small",{children:"Title"}),(0,s.jsx)("input",{value:n,onChange:e=>i(e.target.value),placeholder:"Morning plan"})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("small",{children:"Available minutes"}),(0,s.jsx)("input",{type:"number",min:15,value:u,onChange:e=>o(Number(e.target.value))})]})]}),(0,s.jsxs)("section",{className:"panel stack",children:[(0,s.jsxs)("div",{className:"row",style:{justifyContent:"space-between"},children:[(0,s.jsx)("strong",{children:"Tasks"}),(0,s.jsx)("button",{type:"button",className:"secondary",onClick:()=>{d(e=>[...e,{label:"",duration:30,must:!1}])},children:"Add task"})]}),c.map((e,t)=>(0,s.jsxs)("div",{className:"grid-two",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("small",{children:"Label"}),(0,s.jsx)("input",{value:e.label,onChange:e=>b(t,"label",e.target.value)})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("small",{children:"Duration (min)"}),(0,s.jsx)("input",{type:"number",min:5,value:e.duration,onChange:e=>b(t,"duration",Number(e.target.value))})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("small",{children:"Must"}),(0,s.jsxs)("select",{value:e.must?"yes":"no",onChange:e=>b(t,"must","yes"===e.target.value),children:[(0,s.jsx)("option",{value:"no",children:"Optional"}),(0,s.jsx)("option",{value:"yes",children:"Must"})]})]}),(0,s.jsx)("button",{type:"button",className:"secondary",onClick:()=>p(t),children:"Remove"})]},t)),(0,s.jsx)("button",{type:"button",onClick:j,children:"Create problem"})]})]})}},3323:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(2265);function l(){let[e,t]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=window.localStorage.getItem("solvespace_user_key");if(e){t(e);return}let n=crypto.randomUUID();window.localStorage.setItem("solvespace_user_key",n),t(n)},[]),e}},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9749)}),_N_E=e.O()}]);